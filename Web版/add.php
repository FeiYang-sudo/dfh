<?php require_once( './header.php');?>


<div class="mdui-container doc-container">
    <div class="mdui-typo">
         <h2>表白</h2>
<?php if(isLogin())
{?>
        <div class="mdui-textfield">
            <input id="name" name="name" class="mdui-textfield-input" type="text" placeholder="你的名称" />
        </div>
        <div class="mdui-textfield">
            <input id="osname" name="osname" class="mdui-textfield-input" type="text" placeholder="TA的名称" />
        </div>
        <div class="mdui-textfield">
            <input id="content" name="content" class="mdui-textfield-input" type="text" placeholder="你想对TA说的话" />
        </div>
        <br>
        <div onClick="Submit();" id="Submit" class="mdui-btn mdui-color-theme-accent mdui-ripple">
        	<svg t="1584421261177" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3709" width="50" height="50"><path d="M 554.211 91.25 c -23.8933 -19.456 -58.2542 -19.456 -82.1475 0 L 40.96 441.571 v 507.79 h 944.353 V 441.571 L 554.211 91.25 Z" fill="#ffa9b1" p-id="3710"></path><path d="M 756.395 359.083 C 733.753 273.067 645.689 221.867 559.672 244.509 c -47.4453 12.5155 -84.4231 44.9422 -104.107 86.016 c -37.4329 -25.9413 -85.4471 -36.0675 -133.006 -23.552 c -86.016 22.6418 -137.216 110.706 -114.574 196.722 c 11.9467 45.1698 42.5529 77.3689 79.9858 101.035 L 570.028 761.629 l 164.637 -272.043 c 20.2525 -36.7502 34.0195 -84.0818 21.7315 -130.503 Z" fill="#ffffff" p-id="3711"></path><path d="M 576.512 785.977 L 247.011 596.878 c -28.672 -25.1449 -47.6729 -54.8409 -56.5475 -88.5191 c -12.1742 -46.3075 -5.68889 -94.5497 18.432 -135.851 c 24.1209 -41.3013 62.8053 -70.8835 109.113 -83.0578 c 44.3733 -11.7191 91.0222 -5.91645 130.845 15.5875 c 24.0071 -38.4569 61.7813 -66.4462 106.155 -78.1653 c 95.5734 -25.2587 193.763 31.9715 218.909 127.545 c 10.5813 40.2773 -3.75467 90.7947 -9.78487 110.137 c -10.5813 33.6782 -187.619 321.422 -187.619 321.422 Z M 297.529 589.255 l 266.013 147.911 l 155.193 -256.455 c 12.8569 -23.2107 32.6542 -69.2907 20.0249 -116.963 c -20.0249 -76.1173 -98.3044 -121.742 -174.421 -101.604 c -40.5049 10.6951 -74.1831 38.4569 -92.2738 76.3449 l -9.216 19.2285 l -17.5218 -12.1742 c -34.4747 -23.8933 -77.4827 -31.5165 -117.987 -20.8213 c -36.864 9.67116 -67.8115 33.2231 -86.9262 66.2187 c -19.2285 32.9955 -24.4622 71.4525 -14.6773 108.317 c 9.44353 35.84 32.9955 65.3085 71.7938 89.9982 Z" fill="#ff6b6a" p-id="3712"></path><path d="M 985.316 441.571 L 513.138 731.25 l -0.910222 109.454 l -1.024 -109.454 L 40.96 441.571 v 507.79 l 470.243 0.796445 H 513.138 l 472.178 -0.796445 Z" fill="#ffd2da" p-id="3713"></path><path d="M 463.189 536.69 L 40.96 949.362 h 944.353 L 563.086 536.69 c -27.7618 -27.0791 -72.1351 -27.0791 -99.8972 0 Z" fill="#ffa9b1" p-id="3714"></path><path d="M 336.099 456.135 l 13.0845 -2.95822 l 16.8391 75.2071 l 47.5591 -10.6951 l 2.50311 11.264 l -60.6435 13.5395 l -19.3422 -86.3573 Z M 479.459 435.768 c 9.10222 6.48533 15.1325 16.384 18.0907 29.8098 c 2.95822 13.1982 1.70667 24.6898 -3.75467 34.4747 c -5.68889 10.1262 -15.1325 16.7253 -28.2169 19.6835 c -13.1982 2.95822 -24.4622 1.024 -34.0195 -5.91645 c -8.98845 -6.48533 -15.0187 -16.384 -17.8631 -29.5822 c -2.95822 -13.1982 -1.82045 -24.6898 3.64089 -34.4747 c 5.46133 -10.24 14.9049 -16.9529 28.2169 -19.9111 c 13.0845 -2.95822 24.4622 -1.024 33.9058 5.91645 Z m -50.6311 19.7973 c -3.52711 6.94045 -4.096 15.5875 -1.82045 25.7138 c 2.27555 10.0124 6.48533 17.408 12.6293 22.3005 c 6.48533 5.00622 14.336 6.48533 23.4382 4.43733 c 9.216 -2.048 15.5875 -6.59911 19.3422 -13.7671 c 3.64089 -6.94045 4.20978 -15.5875 1.93422 -25.8275 s -6.59911 -17.8631 -12.8569 -22.7555 c -6.25778 -4.89245 -13.9947 -6.25778 -23.3245 -4.20978 c -9.32978 2.048 -15.8151 6.82667 -19.3422 14.1085 Z M 493.341 420.978 l 14.336 -3.18578 l 40.6187 66.1049 l 0.341333 -0.113778 l 8.41955 -77.1413 l 14.336 -3.18578 l -11.6053 93.2978 l -15.9289 3.52711 l -50.5173 -79.3031 Z M 580.381 401.522 l 62.1227 -13.8809 l 2.50311 11.264 l -48.9245 10.9227 l 5.68889 25.1449 l 45.9662 -10.24 l 2.50311 11.264 l -45.9662 10.24 l 6.144 27.4205 l 50.9725 -11.3778 l 2.50311 11.264 l -64.1707 14.336 l -19.3422 -86.3573 Z" fill="#ff6b6a" p-id="3715"></path></svg> 
        </div>
<?php
}else
{
?>
<h1>你需要<a href="https://www.deginx.com/?plugin=register&action=qqlogin" style="color:#FF1493">登录</a>才能向TA表白哟~</h1>

<?php
}
?>
    </div>
</div>



<script>
function Submit() {
    document.getElementById("Submit").innerHTML = "提交中...";
    var name = document.getElementById("name").value;
    var osname = document.getElementById("osname").value;
    var content = document.getElementById("content").value;
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "./submit.php");
    xhr.setRequestHeader('Content-Type', ' application/x-www-form-urlencoded');
    xhr.send("name=" + name + "&osname=" + osname + "&content=" + content+"&username=<?php echo $username;?>");
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            document.getElementById("Submit").innerHTML = '<svg t="1584422245130" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5411" width="50" height="50"><path d="M964.388184 477.340047a72.848985 72.848985 0 0 1 22.16189 53.612757c0 20.991625-7.387297 38.691881-22.16189 53.612757a72.044428 72.044428 0 0 1-53.466474 22.16189c-20.845342 0-38.618739-7.460438-53.612757-22.16189a72.848985 72.848985 0 0 1-22.16189-53.612757c0-20.991625 7.387297-38.691881 22.16189-53.612757a72.848985 72.848985 0 0 1 53.612757-22.161889c20.7722 0 38.765022 7.460438 53.466474 22.161889m-99.911359 348.885199a73.141551 73.141551 0 0 1-22.527598 53.393332 72.995268 72.995268 0 0 1-53.393332 22.527598c-20.991625 0-38.618739-7.460438-53.612757-22.16189a72.848985 72.848985 0 0 1-22.16189-53.612757c0-20.991625 7.460438-38.618739 22.16189-53.612757a72.848985 72.848985 0 0 1 53.612757-22.16189c20.991625 0 38.691881 7.460438 53.612757 22.16189a72.410136 72.410136 0 0 1 22.308173 53.466474m56.904127-590.179175c0 36.717059-13.019196 68.094784-39.13073 93.913751a128.070856 128.070856 0 0 1-93.621185 38.691881c-36.643917 0-68.021642-12.946055-93.913752-38.691881a127.924573 127.924573 0 0 1-38.618739-93.913751c0-36.351351 12.946055-67.582793 38.618739-93.621186a127.924573 127.924573 0 0 1 93.986893-39.13073c36.351351 0 67.582793 13.092338 93.548044 39.203872 26.111534 25.818968 39.13073 57.05041 39.13073 93.548044m-374.192175 658.566525a72.848985 72.848985 0 0 1 22.088748 53.612757c0 20.991625-7.387297 38.691881-22.088748 53.612757a72.848985 72.848985 0 0 1-53.685899 22.16189c-20.991625 0-38.618739-7.460438-53.612757-22.16189a72.410136 72.410136 0 0 1-22.16189-53.612757c0-20.991625 7.460438-38.618739 22.16189-53.612757a72.848985 72.848985 0 0 1 53.612757-22.16189c20.991625 0 38.765022 7.460438 53.685899 22.16189M574.251151 33.151408c22.088748 22.16189 33.206264 48.931698 33.206264 80.675131 0 31.743433-11.117516 58.366958-33.206264 80.601989a109.566043 109.566043 0 0 1-80.60199 33.133123c-31.743433 0-58.366958-11.117516-80.601989-33.133123a109.346619 109.346619 0 0 1-33.206264-80.601989c0-31.743433 11.190657-58.366958 33.206264-80.675131A109.785468 109.785468 0 0 1 493.57602 0.018285c31.59715 0 58.366958 11.117516 80.601989 33.133123M252.208901 772.612489a72.848985 72.848985 0 0 1 22.088749 53.612757c0 20.991625-7.387297 38.691881-22.088749 53.685898a72.848985 72.848985 0 0 1-53.685898 22.088749 73.141551 73.141551 0 0 1-53.393332-22.527598 72.995268 72.995268 0 0 1-22.454457-53.393332c0-20.991625 7.387297-38.618739 22.088749-53.612757a72.848985 72.848985 0 0 1 53.685898-22.088748c20.991625 0 38.911305 7.387297 53.75904 22.235031M265.37438 168.975268c18.577954 18.577954 27.866931 40.959269 27.866931 66.92452 0 26.038392-9.288977 48.273424-27.866931 66.99766-18.577954 18.651096-40.959269 28.013214-66.99766 28.013214-25.965251 0-48.273424-9.215835-66.924519-27.940072a91.134373 91.134373 0 0 1-27.866931-66.924519c0-25.965251 9.215835-48.273424 27.866931-66.92452 18.724237-18.724237 40.959269-27.940072 66.924519-27.940072 26.038392 0 48.273424 9.215835 66.99766 27.793789M129.98937 477.340047a72.848985 72.848985 0 0 1 22.161889 53.612757c0 20.991625-7.460438 38.691881-22.161889 53.612757a72.190711 72.190711 0 0 1-53.612757 22.16189c-20.991625 0-38.691881-7.460438-53.612757-22.16189A72.190711 72.190711 0 0 1 0.601966 531.025946c0-20.991625 7.460438-38.691881 22.16189-53.612757a72.848985 72.848985 0 0 1 53.612757-22.16189c20.991625 0 38.765022 7.460438 53.612757 22.16189" p-id="5412"></path></svg>';
            if (xhr.responseText == 200) {
            	document.getElementById("Submit").innerHTML = '<svg t="1584421471404" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4528" width="50" height="50"><path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m0 947.2c-240.64 0-435.2-194.56-435.2-435.2S271.36 76.8 512 76.8s435.2 194.56 435.2 435.2-194.56 435.2-435.2 435.2z m266.24-578.56c0 10.24-5.12 20.48-10.24 25.6l-286.72 286.72c-5.12 5.12-15.36 10.24-25.6 10.24s-20.48-5.12-25.6-10.24l-163.84-163.84c-15.36-5.12-20.48-15.36-20.48-25.6 0-20.48 15.36-40.96 40.96-40.96 10.24 5.12 20.48 10.24 25.6 15.36l138.24 138.24 261.12-261.12c5.12-5.12 15.36-10.24 25.6-10.24 20.48-5.12 40.96 15.36 40.96 35.84z" fill="#6BC839" p-id="4529"></path></svg>';
                mdui.dialog({
                    title: '表白成功...',
                    content: '愿你们真诚的相爱之火，如初升的太阳，越久越旺；让众水也不能熄灭，大水也不能淹没！',
                    modal: true
                });
                setTimeout(() => {
                    window.location.href = "./index.php";
                }, 3000);
            } else {
                mdui.alert(xhr.responseText, '表白失败...');
            }
        }
    }
}
</Script>
<br />
</body>
<?php require_once( './footer.php'); ?>